
def init(module):
	module.set_name("l3test")
	module.set_description("Low Level Lua tests.")

def prepare(module, options):
	module.depends([":utils"])
	return True

def build(env):
	env.copy('src', 'test')
	
	if env[':test']:
		env.copy('test', 'test', ignore=env.ignore_files('main.cpp'))

	env.copy('lua/modules/l3test', 'test/modules/l3test')
	env.copy('ext/lua-5.2.3/src', 'ext/lua', ignore=env.ignore_files('lua.c', 'luac.c'))
	
	env.copy('lua/src', 'lua/src')
	env.copy('ext/luassert', 'lua/src/luassert')
	env.copy('ext/say', 'lua/src/say')
	
	env.copy('bin', 'bin')
